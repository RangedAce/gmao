<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>{{ contract and "Modifier le contrat" or "Nouveau contrat" }}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<nav>
  <a href="/">Accueil</a>
  <a href="/tickets">Tickets</a>
  <a href="/materiels">Materiel</a>
  <a href="/clients">Clients</a>
</nav>

<main>
  <div class="card">
    <h1>{{ contract and "Modifier le contrat" or "Nouveau contrat" }}</h1>
    <p>Client : <strong>{{ client.nom }}</strong></p>
    {% if error %}<p style="color:red;">{{ error }}</p>{% endif %}
    <form method="post">
      <div class="form-row">
        <div>
          <label>Numéro</label>
          <input type="text" name="numero" value="{{ contract.numero if contract else '' }}" required>
        </div>
        <div>
          <label>Durée</label>
          <input type="text" name="duree" value="{{ contract.duree if contract else '' }}">
        </div>
        <div>
          <label>Type de contrat</label>
          <input type="text" name="type_contrat" value="{{ contract.type_contrat if contract else '' }}">
        </div>
      </div>
      <div class="form-row">
        <div>
          <label>Date effet</label>
          <input type="date" name="date_effet" value="{{ contract.date_effet|date('Y-m-d') if contract and contract.date_effet else '' }}">
        </div>
        <div>
          <label>Date renouvellement</label>
          <input type="date" name="date_renouvellement" value="{{ contract.date_renouvellement|date('Y-m-d') if contract and contract.date_renouvellement else '' }}">
        </div>
        <div>
          <label>Prix total</label>
          <input type="number" step="0.01" name="prix_total" value="{{ contract.prix_total if contract and contract.prix_total is not none else '' }}">
        </div>
      </div>
      <div class="form-row">
        <div>
          <label>Conditions</label>
          <textarea name="conditions" rows="3">{{ contract.conditions if contract else '' }}</textarea>
        </div>
      </div>
      <div class="form-row">
        <label><input type="checkbox" name="resilie" {% if contract and contract.resilie %}checked{% endif %}> Résilié</label>
        <label><input type="checkbox" name="reconductible" {% if contract and contract.reconductible %}checked{% endif %}> Reconductible</label>
      </div>
      <button type="submit">Enregistrer</button>
      <a class="btn secondary" href="{{ url_for('client_fiche', id=client.id) }}">Annuler</a>
    </form>
  </div>
</main>

</body>
</html>
